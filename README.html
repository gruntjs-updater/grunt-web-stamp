<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="author" content="yanni4night@gmail.com"/>
  <style>
  body
  {
  font-size:15px;
  line-height:1.7;
  overflow-x:hidden;
  background-color: white;
  border-radius: 3px;
  border: 3px solid #EEE;
  box-shadow: inset 0 0 0 1px #CECECE;
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  max-width: 912px;
  padding: 30px;
  margin: 2em auto;
  color:#333333;
  }
  .body-classic{
  color:#444;
  font-family:Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman', "Hiragino Sans GB", "STXihei", "微软雅黑", serif;
  font-size:16px;
  line-height:1.5em;
  background:#fefefe;
  width: 45em;
  margin: 10px auto;
  padding: 1em;
  outline: 1300px solid #FAFAFA;
  }
  body>:first-child
  {
  margin-top:0!important;
  }
  body>:last-child
  {
  margin-bottom:0!important;
  }
  blockquote,dl,ol,p,pre,table,ul {
  border: 0;
  margin: 15px 0;
  padding: 0;
  }
  body a {
  color: #4183c4;
  text-decoration: none;
  }
  body a:hover {
  text-decoration: underline;
  }
  body a.absent
  {
  color:#c00;
  }
  body a.anchor
  {
  display:block;
  padding-left:30px;
  margin-left:-30px;
  cursor:pointer;
  position:absolute;
  top:0;
  left:0;
  bottom:0
  }
  /*h4,h5,h6{ font-weight: bold; }*/
  .octicon{
  font:normal normal 16px sans-serif;
  width: 1em;
  height: 1em;
  line-height:1;
  display:inline-block;
  text-decoration:none;
  -webkit-font-smoothing:antialiased
  }
  .octicon-link {
  background: url("data:image/svg+xml;utf8,<?xml version='1.0' standalone='no'?> <!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'> <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1024 832'> <metadata>Copyright (C) 2013 by GitHub</metadata> <!-- scale(0.01565557729941) --> <path transform='' d='M768 64h-192s-254 0-256 256c0 22 3 43 8 64h137c-11-19-18-41-18-64 0-128 128-128 128-128h192s128 0 128 128-128 128-128 128 0 64-64 128h64s256 0 256-256-256-256-256-256z m-72 192h-137c11 19 18 41 18 64 0 128-128 128-128 128h-192s-128 0-128-128 128-128 128-128-4-65 66-128h-66s-256 0-256 256 256 256 256 256h192s256 0 256-256c0-22-4-44-8-64z'/> </svg>");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: bottom;
  }
  .octicon-link:before{
  content:'\a0';
  }
  body h1,body h2,body h3,body h4,body h5,body h6{
  margin:1em 0 15px;
  padding:0;
  font-weight:bold;
  line-height:1.7;
  cursor:text;
  position:relative
  }
  body h1 .octicon-link,body h2 .octicon-link,body h3 .octicon-link,body h4 .octicon-link,body h5 .octicon-link,body h6 .octicon-link{
  display:none;
  color:#000
  }
  body h1:hover a.anchor,body h2:hover a.anchor,body h3:hover a.anchor,body h4:hover a.anchor,body h5:hover a.anchor,body h6:hover a.anchor{
  text-decoration:none;
  line-height:1;
  padding-left:0;
  margin-left:-22px;
  top:15%
  }
  body h1:hover a.anchor .octicon-link,body h2:hover a.anchor .octicon-link,body h3:hover a.anchor .octicon-link,body h4:hover a.anchor .octicon-link,body h5:hover a.anchor .octicon-link,body h6:hover a.anchor .octicon-link{
  display:inline-block
  }
  body h1 tt,body h1 code,body h2 tt,body h2 code,body h3 tt,body h3 code,body h4 tt,body h4 code,body h5 tt,body h5 code,body h6 tt,body h6 code{
  font-size:inherit
  }
  body h1{
  font-size:2.5em;
  border-bottom:1px solid #ddd
  }
  body h2{
  font-size:2em;
  border-bottom:1px solid #eee
  }
  body h3{
  font-size:1.5em
  }
  body h4{
  font-size:1.2em
  }
  body h5{
  font-size:1em
  }
  body h6{
  color:#777;
  font-size:1em
  }
  body p,body blockquote,body ul,body ol,body dl,body table,body pre{
  margin:15px 0
  }
  body h1 tt,body h1 code,body h2 tt,body h2 code,body h3 tt,body h3 code,body h4 tt,body h4 code,body h5 tt,body h5 code,body h6 tt,body h6 code
  {
  font-size:inherit;
  }
  body hr
  {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC);
  background-repeat: repeat-x;
  /*background:transparent url(http://overblown.net/files/markdown/dirty-shade.png) repeat-x 0 0;*/
  background-color: transparent;
  background-position: 0;
  border:0 none;
  color:#ccc;
  height:4px;
  margin:15px 0;
  padding:0;
  }
  body li p.first
  {
  display:inline-block;
  }
  body ul,body ol
  {
  padding-left:30px;
  }
  body ul.no-list,body ol.no-list
  {
  list-style-type:none;
  padding:0;
  }
  body ul ul,body ul ol,body ol ol,body ol ul
  {
  margin-bottom:0;
  margin-top:0;
  }
  body dl
  {
  padding:0;
  }
  body dl dt
  {
  font-size:14px;
  font-style:italic;
  font-weight:700;
  margin-top:15px;
  padding:0;
  }
  body dl dd
  {
  margin-bottom:15px;
  padding:0 15px;
  }
  body blockquote
  {
  border-left:4px solid #DDD;
  color:#777;
  padding:0 15px;
  }
  body blockquote>:first-child
  {
  margin-top:0;
  }
  body blockquote>:last-child
  {
  margin-bottom:0;
  }
  body table
  {
  display:block;
  overflow:auto;
  width:100%;
  border-collapse: collapse;
  border-spacing: 0;
  padding: 0;
  }
  body table th
  {
  font-weight:700;
  }
  body table th,body table td
  {
  border:1px solid #ddd;
  padding:6px 13px;
  }
  body table tr
  {
  background-color:#fff;
  border-top:1px solid #ccc;
  }
  body table tr:nth-child(2n)
  {
  background-color:#f8f8f8;
  }
  body img
  {
  -moz-box-sizing:border-box;
  box-sizing:border-box;
  max-width:100%;
  }
  body span.frame
  {
  display:block;
  overflow:hidden;
  }
  body span.frame>span
  {
  border:1px solid #ddd;
  display:block;
  float:left;
  margin:13px 0 0;
  overflow:hidden;
  padding:7px;
  width:auto;
  }
  body span.frame span img
  {
  display:block;
  float:left;
  }
  body span.frame span span
  {
  clear:both;
  color:#333;
  display:block;
  padding:5px 0 0;
  }
  body span.align-center
  {
  clear:both;
  display:block;
  overflow:hidden;
  }
  body span.align-center>span
  {
  display:block;
  margin:13px auto 0;
  overflow:hidden;
  text-align:center;
  }
  body span.align-center span img
  {
  margin:0 auto;
  text-align:center;
  }
  body span.align-right
  {
  clear:both;
  display:block;
  overflow:hidden;
  }
  body span.align-right>span
  {
  display:block;
  margin:13px 0 0;
  overflow:hidden;
  text-align:right;
  }
  body span.align-right span img
  {
  margin:0;
  text-align:right;
  }
  body span.float-left
  {
  display:block;
  float:left;
  margin-right:13px;
  overflow:hidden;
  }
  body span.float-left span
  {
  margin:13px 0 0;
  }
  body span.float-right
  {
  display:block;
  float:right;
  margin-left:13px;
  overflow:hidden;
  }
  body span.float-right>span
  {
  display:block;
  margin:13px auto 0;
  overflow:hidden;
  text-align:right;
  }
  body code,body tt
  {
  background-color:#f8f8f8;
  border:1px solid #ddd;
  border-radius:3px;
  margin:0 2px;
  padding:0 5px;
  }
  body code
  {
  white-space:nowrap;
  }
  code,pre{
  font-family:Consolas, "Liberation Mono", Courier, monospace;
  font-size:12px
  }
  body pre>code
  {
  background:transparent;
  border:none;
  margin:0;
  padding:0;
  white-space:pre;
  }
  body .highlight pre,body pre
  {
  background-color:#f8f8f8;
  border:1px solid #ddd;
  font-size:13px;
  line-height:19px;
  overflow:auto;
  padding:6px 10px;
  border-radius:3px
  }
  body pre code,body pre tt
  {
  background-color:transparent;
  border:none;
  margin:0;
  padding:0;
  }
  body .task-list{
  list-style-type:none;
  padding-left:10px
  }
  .task-list-item{
  padding-left:20px
  }
  .task-list-item label{
  font-weight:normal
  }
  .task-list-item.enabled label{
  cursor:pointer
  }
  .task-list-item+.task-list-item{
  margin-top:5px
  }
  .task-list-item-checkbox{
  float:left;
  margin-left:-20px;
  margin-top:7px
  }
  .highlight{
  background:#ffffff
  }
  .highlight .c{
  color:#999988;
  font-style:italic
  }
  .highlight .err{
  color:#a61717;
  background-color:#e3d2d2
  }
  .highlight .k{
  font-weight:bold
  }
  .highlight .o{
  font-weight:bold
  }
  .highlight .cm{
  color:#999988;
  font-style:italic
  }
  .highlight .cp{
  color:#999999;
  font-weight:bold
  }
  .highlight .c1{
  color:#999988;
  font-style:italic
  }
  .highlight .cs{
  color:#999999;
  font-weight:bold;
  font-style:italic
  }
  .highlight .gd{
  color:#000000;
  background-color:#ffdddd
  }
  .highlight .gd .x{
  color:#000000;
  background-color:#ffaaaa
  }
  .highlight .ge{
  font-style:italic
  }
  .highlight .gr{
  color:#aa0000
  }
  .highlight .gh{
  color:#999999
  }
  .highlight .gi{
  color:#000000;
  background-color:#ddffdd
  }
  .highlight .gi .x{
  color:#000000;
  background-color:#aaffaa
  }
  .highlight .go{
  color:#888888
  }
  .highlight .gp{
  color:#555555
  }
  .highlight .gs{
  font-weight:bold
  }
  .highlight .gu{
  color:#800080;
  font-weight:bold
  }
  .highlight .gt{
  color:#aa0000
  }
  .highlight .kc{
  font-weight:bold
  }
  .highlight .kd{
  font-weight:bold
  }
  .highlight .kn{
  font-weight:bold
  }
  .highlight .kp{
  font-weight:bold
  }
  .highlight .kr{
  font-weight:bold
  }
  .highlight .kt{
  color:#445588;
  font-weight:bold
  }
  .highlight .m{
  color:#009999
  }
  .highlight .s{
  color:#d14
  }
  .highlight .n{
  color:#333333
  }
  .highlight .na{
  color:#008080
  }
  .highlight .nb{
  color:#0086B3
  }
  .highlight .nc{
  color:#445588;
  font-weight:bold
  }
  .highlight .no{
  color:#008080
  }
  .highlight .ni{
  color:#800080
  }
  .highlight .ne{
  color:#990000;
  font-weight:bold
  }
  .highlight .nf{
  color:#990000;
  font-weight:bold
  }
  .highlight .nn{
  color:#555555
  }
  .highlight .nt{
  color:#000080
  }
  .highlight .nv{
  color:#008080
  }
  .highlight .ow{
  font-weight:bold
  }
  .highlight .w{
  color:#bbbbbb
  }
  .highlight .mf{
  color:#009999
  }
  .highlight .mh{
  color:#009999
  }
  .highlight .mi{
  color:#009999
  }
  .highlight .mo{
  color:#009999
  }
  .highlight .sb{
  color:#d14
  }
  .highlight .sc{
  color:#d14
  }
  .highlight .sd{
  color:#d14
  }
  .highlight .s2{
  color:#d14
  }
  .highlight .se{
  color:#d14
  }
  .highlight .sh{
  color:#d14
  }
  .highlight .si{
  color:#d14
  }
  .highlight .sx{
  color:#d14
  }
  .highlight .sr{
  color:#009926
  }
  .highlight .s1{
  color:#d14
  }
  .highlight .ss{
  color:#990073
  }
  .highlight .bp{
  color:#999999
  }
  .highlight .vc{
  color:#008080
  }
  .highlight .vg{
  color:#008080
  }
  .highlight .vi{
  color:#008080
  }
  .highlight .il{
  color:#009999
  }
  .highlight .gc{
  color:#999;
  background-color:#EAF2F5
  }
  .type-csharp .highlight .k{
  color:#0000FF
  }
  .type-csharp .highlight .kt{
  color:#0000FF
  }
  .type-csharp .highlight .nf{
  color:#000000;
  font-weight:normal
  }
  .type-csharp .highlight .nc{
  color:#2B91AF
  }
  .type-csharp .highlight .nn{
  color:#000000
  }
  .type-csharp .highlight .s{
  color:#A31515
  }
  .type-csharp .highlight .sc{
  color:#A31515
  }
</style>
<title>grunt-web-stamp</title>
</head>
<body>
<h1 id="grunt-web-stamp">grunt-web-stamp</h1>
<p><a href="https://npmjs.org/package/grunt-web-stamp"><img src="http://img.shields.io/npm/v/grunt-web-stamp.svg" alt="NPM version"></a> <a href="https://npmjs.org/package/grunt-web-stamp"><img src="http://img.shields.io/npm/dm/grunt-web-stamp.svg" alt="Downloads"></a> <a href="https://travis-ci.org/yanni4night/grunt-web-stamp"><img src="http://img.shields.io/travis/yanni4night/grunt-web-stamp.svg" alt="Build Status"></a> <a href="https://ci.appveyor.com/project/yanni4night/grunt-web-stamp"><img src="https://ci.appveyor.com/api/projects/status/pkop2xgtxca40wcd?svg=true" alt="Build status"></a> <a href="https://david-dm.org/yanni4night/grunt-web-stamp"><img src="https://david-dm.org/yanni4night/grunt-web-stamp.svg" alt="Dependency status"></a> <a href="http://gruntjs.com/"><img src="http://img.shields.io/badge/BUILT%20WITH-GRUNT-yellow.svg" alt="Built with Grunt"></a></p>
<p>We now support more custom characteristics.</p>
<blockquote>
<p>Add timestamp to the url path.It search <code>&lt;img/&gt;</code>,<code>&lt;link/&gt;</code>,<code>&lt;script/&gt;</code> and <code>url()</code> to resolve
every path and calculate timestamp to append to it.</p>
</blockquote>
<h2 id="getting-started">Getting Started</h2>
<p>This plugin requires Grunt <code>~0.4.4</code></p>
<p>If you haven&#39;t used <a href="http://gruntjs.com/">Grunt</a> before, be sure to check out the <a href="http://gruntjs.com/getting-started">Getting Started</a> guide, as it explains how to create a <a href="http://gruntjs.com/sample-gruntfile">Gruntfile</a> as well as install and use Grunt plugins. Once you&#39;re familiar with that process, you may install this plugin with this command:</p>
<pre><code class="lang-shell">npm install grunt-web-stamp --save-dev</code></pre>
<p>Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:</p>
<pre><code class="lang-js">grunt.loadNpmTasks(&#39;grunt-web-stamp&#39;);</code></pre>
<h2 id="the-stamp-task">The &quot;stamp&quot; task</h2>
<h3 id="overview">Overview</h3>
<p>In your project&#39;s Gruntfile, add a section named <code>stamp</code> to the data object passed into <code>grunt.initConfig()</code>.</p>
<pre><code class="lang-js">grunt.initConfig({
  stamp: {
    options: {
      // Task-specific options go here.
    },
    your_target: {
      // Target-specific file lists and/or options go here.
    },
  },
});</code></pre>
<h3 id="options">Options</h3>
<h4 id="basedir">baseDir</h4>
<p>Type: <code>String</code>
Default value: <code>&#39;.&#39;</code></p>
<p>A string value that is indicating where the resource files are.</p>
<p>You can assign a function instead:</p>
<pre><code>{
    baseDir:function(targetFilePath){return &quot;static/&quot;;}
}</code></pre>
<h4 id="prefix">prefix</h4>
<p>Type: <code>String</code> or <code>Function</code>
Default value: <code>&#39;&#39;</code></p>
<p>A string value that will be prepended to each url path.If it&#39;s defined as a function,real filepath will be passed in as the only parameter.Ex:</p>
<pre><code>prefix:function(filepath){return /\.css$/.test(filepath)?&#39;cdn_css&#39;:&#39;cdn_js&#39;;}</code></pre>
<h4 id="pattern">pattern</h4>
<p>Type: <code>String</code> or <code>Function</code>
Default value: <code>&#39;u|l|s|i&#39;</code></p>
<p>A char sequence indicates which kinds of url should be handled.</p>
<ul>
<li>&#39;i&#39;:<code>&lt;img/&gt;</code></li>
<li>&#39;l&#39;:<code>&lt;link/&gt;</code></li>
<li>&#39;u&#39;:<code>url()</code></li>
<li>&#39;s&#39;:<code>&lt;script/&gt;</code></li>
</ul>
<p>You can make any combination of them,they&#39;re case-sensitive.</p>
<p>You can assign a function instead.</p>
<pre><code>{
    &quot;pattern&quot;:function(filepath){return /\.html$/.test(filepath)?&quot;l|i|s&quot;:&quot;u&quot;;}
}</code></pre>
<h4 id="stampname">stampName</h4>
<p>Type: <code>String</code>
Default value: <code>&#39;t&#39;</code></p>
<p>Query name for the timestamp.</p>
<h4 id="crypto">crypto</h4>
<p>Type: <code>String</code>
Default value: <code>&#39;md5&#39;</code></p>
<p>A crypto algorithm name.More available names are <code>sha1</code>,<code>sha256</code> and <code>sha512</code>.</p>
<h4 id="changefilename">changeFileName</h4>
<p>Type: <code>Boolean</code>
Default value: <code>false</code></p>
<p>If set to true,stamp will be merged into filname instead of appended.Note that this will <strong>not</strong> rename the real file but <strong>copy</strong> it.</p>
<h4 id="regex">regex</h4>
<p>Type: <code>Object</code>
Default value: <code>{}</code></p>
<p>Custom search pattern defination.Ex:</p>
<pre><code>regex: {
  &#39;@&#39;: {
    pattern: /@([\w\/.]+)@/,
    index: 1,//filepath is in RegExp.$1
    whole: true //replace whole pattern,including the &#39;@&#39; on the both sides
  }
}</code></pre>
<h4 id="buildfilename">buildFileName</h4>
<p>Type: <code>Function</code>
Default value: ``</p>
<p>Custom filename building function.This is only useful when <code>changeFileName</code> is set to true.Ex:</p>
<pre><code>function(filename,filext,stamp{
  return filename + &#39;_&#39; + stamp + &#39;.&#39; + filext;
}</code></pre>
<h4 id="filestamp">fileStamp</h4>
<p>Type: <code>Function</code>
Default value: <code>null</code></p>
<p>A function calculates a file&#39;s stamp,the file path is the parameter passed in ,Ex:</p>
<pre><code>function(path){
  return md5(path) + Date.now();
}</code></pre>
<h4 id="ignoremissing">ignoreMissing</h4>
<p>Type: <code>Boolean</code>
Default value:  <code>false</code></p>
<p>If set true,an UNIX timestamp in 36 <em>hexadecimal</em> will be the stamp if the file is not found.Or else nothing will be appended,and warnings is displayed.</p>
<h4 id="missingstamp">missingStamp</h4>
<p>Type: <code>Function</code>
Default value: <code>null</code></p>
<p>Like <a href="#filestamp">filestamp</a>,but is used for missing files.This will not work if <a href="#ignoremissing">ignoreMissing</a> set to false.</p>
<h4 id="forceabsolute">forceAbsolute</h4>
<p>Type: <code>Boolean</code>
Default value: <code>true</code></p>
<p>All the urls treated as <em>absolute</em>,or only the ones start with &#39;/&#39; would be.</p>
<h2 id="contributing">Contributing</h2>
<p>In lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed functionality. Lint and test your code using <a href="http://gruntjs.com/">Grunt</a>.</p>

</body>
</html>